<html data-namespace-typo3-fluid="true"
      xmlns="http://www.w3.org/1999/xhtml" lang="en"
      xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
      xmlns:backend="http://typo3.org/ns/TYPO3/CMS/Backend/ViewHelpers"
>
    <div class="border-0">
        <table class="table table-striped table-hover mb-0">
            <thead>
                <tr>
                    <th><f:translate key="index_queue.statistics.details.record_uid" /></th>
                    <f:if condition="{statistic.table_name} == 'pages'">
                        <th class="col-title col-responsive nowrap"><f:translate key="index_queue.statistics.details.record_title" /></th>
                    </f:if>
                    <f:if condition="{statistic.table_name} == 'tt_content'">
                        <th class="col-title col-responsive nowrap"><f:translate key="index_queue.statistics.details.record_title" /></th>
                        <th class="col-title nowrap"><f:translate key="index_queue.statistics.details.page" /></th>
                    </f:if>
                    <f:if condition="{statistic.table_name} == 'sys_file_metadata'">
                        <th class="col-title col-responsive nowrap"><f:translate key="index_queue.statistics.details.file_name" /></th>
                        <th class="col-title nowrap"><f:translate key="index_queue.statistics.details.file_path" /></th>
                        <th class="col-title nowrap"><f:translate key="index_queue.statistics.details.file_type" /></th>
                        <th class="col-title nowrap"><f:translate key="index_queue.statistics.details.content_element" /></th>
                    </f:if>
                </tr>
            </thead>
            <tbody>
                <f:for each="{statistic.items}" as="item">
                    <tr>
                        <td>
                            <f:variable name="recordLink"><backend:uri.editRecord table="{statistic.table_name}" uid="{item.record_uid}" returnUrl="{f:be.uri(route: 'mkk_typo3_search_queue')}" /></f:variable>
                            <a href="{recordLink}" title="{f:translate(key: 'LLL:EXT:core/Resources/Private/Language/locallang_mod_web_list.xlf:edit')}">
                                {item.record_uid}
                            </a>
                        </td>
                        <f:if condition="{statistic.table_name} == 'pages'">
                            <td class="col-title col-responsive nowrap">
                                {f:if(condition: item.page_title, then: item.page_title, else: 'pages:{item.record_uid}')}
                            </td>
                        </f:if>
                        <f:if condition="{statistic.table_name} == 'tt_content'">
                            <td class="col-title col-responsive nowrap">
                                {f:if(condition: item.content_info.header, then: item.content_info.header, else: 'tt_content:{item.record_uid}')}
                            </td>
                            <td class="col-control nowrap">
                                <f:variable name="pageLink"><backend:uri.editRecord table="pages" uid="{item.content_info.page_uid}" returnUrl="{f:be.uri(route: 'mkk_typo3_search_queue')}" /></f:variable>
                                <a href="{pageLink}" title="{f:translate(key: 'LLL:EXT:core/Resources/Private/Language/locallang_mod_web_list.xlf:edit')}">{item.content_info.page_uid}</a>
                            </td>
                        </f:if>
                        <f:if condition="{statistic.table_name} == 'sys_file_metadata'">
                            <td class="col-title col-responsive nowrap">{item.file_info.name}</td>
                            <td class="col-title nowrap">{item.file_info.path}</td>
                            <td class="col-title nowrap">{item.file_info.type}</td>
                            <td class="col-control nowrap">
                                <f:if condition="{item.usages}">
                                    <f:for each="{item.usages}" as="usage" iteration="usageIter">
                                        <f:variable name="backendLink"><backend:uri.editRecord table="tt_content" uid="{usage.uid}" returnUrl="{f:be.uri(route: 'mkk_typo3_search_queue')}" /></f:variable>
                                        <a href="{backendLink}" title="{f:translate(key: 'LLL:EXT:core/Resources/Private/Language/locallang_mod_web_list.xlf:edit')}">{usage.uid}</a>{f:if(condition: usageIter.isLast, else: ', <br />')}
                                    </f:for>
                                </f:if>
                            </td>
                        </f:if>
                    </tr>
                </f:for>
            </tbody>
        </table>
    </div>
</html>
